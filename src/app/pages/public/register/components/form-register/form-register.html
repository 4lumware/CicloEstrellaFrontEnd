<form class="form-group-container" [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <section class="form-input-container">
    <app-input
      id="register-student-name"
      label="Nombre"
      type="text"
      placeholder="Casilla para el nombre"
      [control]="formGroup.controls.name"
    />

    <app-input
      id="register-student-email"
      label="Correo Electronico"
      type="text"
      placeholder="Casilla para el Correo Electronico"
      [control]="formGroup.controls.email"
    />

    <app-select
      id="register-student-select-career"
      label="Selecciona una carrera"
      [options]="careerGroup()"
      [control]="formGroup.controls.career"
    />

    <app-select
      id="register-student-select-term"
      label="Seleccione su ciclo"
      [options]="termOptions"
      panel="up"
      [control]="formGroup.controls.term"
    />

    <app-input
      id="register-student-password"
      label="Contraseña"
      type="password"
      placeholder="Casilla para la Contraseña"
      [control]="formGroup.controls.password"
    />

    <app-input
      id="register-student-repeat-password"
      label="Repetir Contraseña"
      type="password"
      placeholder="Casilla para Repetir Contraseña"
      [control]="formGroup.controls.repeatPassword"
    />

    <div class="profile-image-group">
      <label for="profileImageInput" class="profile-image-label">Foto de perfil (opcional)</label>
      <div
        class="profile-image-preview"
        (click)="profileImageInput.click()"
        role="button"
        tabindex="0"
      >
        <ng-container *ngIf="profileImagePreview(); else uploadPlaceholder">
          <div class="image-preview-container">
            <img
              [src]="profileImagePreview()"
              alt="Preview"
              class="preview-img"
              (error)="onPreviewError()"
            />
            <button
              mat-icon-button
              type="button"
              (click)="removeImage(); $event.stopPropagation()"
              aria-label="Quitar imagen"
              class="remove-image-btn"
            >
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </ng-container>

        <ng-template #uploadPlaceholder>
          <div class="upload-placeholder">
            <mat-icon class="upload-icon">add_photo_alternate</mat-icon>
            <p>Selecciona una imagen</p>
            <span class="upload-hint">JPG, PNG (Máx. 5MB)</span>
          </div>
        </ng-template>

        <input
          #profileImageInput
          id="profileImageInput"
          type="file"
          accept="image/*"
          (change)="onFileSelected($event)"
          style="display: none"
        />
      </div>
    </div>
  </section>

  <section class="submit-form">
    <mat-checkbox [formControl]="formGroup.controls.acceptConditions"
      >Aceptar terminos y condiciones</mat-checkbox
    >

    <section class="button-content">
      <button matButton="filled" type="submit" [disabled]="formGroup.invalid">Crear Cuenta</button>
      <p class="p-button-cta">Ya tienes cuenta? <a class="span-button-cta">Inicia Sesion</a></p>
    </section>
  </section>
</form>
